# ๐ ะะฑะฝะพะฒะปะตะฝะธั ะดะปั ะฟะพะดะดะตัะถะบะธ Traefik

ะญัะพ ะดะพะบัะผะตะฝั ะพะฟะธััะฒะฐะตั ะฒัะต ะธะทะผะตะฝะตะฝะธั, ัะดะตะปะฐะฝะฝัะต ะดะปั ะฟะพะดะดะตัะถะบะธ ัะฐะทะฒะตัััะฒะฐะฝะธั ั Traefik.

## ๐ ะัะฐัะบะพะต ัะตะทัะผะต

ะัะพะตะบั ะฑัะป ะฟะตัะตะบะพะฝัะธะณััะธัะพะฒะฐะฝ ะดะปั ัะฐะฑะพัั ั **Traefik reverse proxy** ั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะฒัะดะฐัะตะน **Let's Encrypt SSL ัะตััะธัะธะบะฐัะพะฒ**.

**ะัะฝะพะฒะฝะพะน ะฐะดัะตั ะฟะพัะปะต ัะฐะทะฒะตัััะฒะฐะฝะธั:** `https://procurement.fros-ty.com`

## ๐ ะงัะพ ะธะทะผะตะฝะธะปะพัั

### ะคะฐะนะปั ะบะพะฝัะธะณััะฐัะธะธ

| ะคะฐะนะป | ะะทะผะตะฝะตะฝะธั |
|------|-----------|
| `docker-compose.yml` | โ ะะพะปะฝะพัััั ะฟะตัะตะฟะธัะฐะฝ ะดะปั Traefik; ัะตัั `proxy` ะฒะผะตััะพ `shoper-network`; ะดะพะฑะฐะฒะปะตะฝั Traefik labels |
| `backend/Dockerfile` | โ ะะพะฑะฐะฒะปะตะฝ healthcheck; ะฟะพัั ะพััะฐะปัั 3002 |
| `backend/src/server.js` | โ ะะพะฑะฐะฒะปะตะฝั CORS ะดะปั Traefik; trust proxy; ัะปัััะตะฝะฝัะน healthcheck |
| `frontend/Dockerfile` | โ ะะพะฑะฐะฒะปะตะฝ healthcheck; ะดะพะฑะฐะฒะปะตะฝ curl ะดะปั ะฟัะพะฒะตัะพะบ |
| `frontend/nginx.conf` | โ ะฃะฑัะฐะฝ proxy ะบ backend; ะดะพะฑะฐะฒะปะตะฝั Traefik headers; healthcheck endpoint |
| `.env.production.example` | โ **ะะะะซะ** ัะฐะนะป ะดะปั production ะฟะตัะตะผะตะฝะฝัั |

### ะะพะฒัะต ัะฐะนะปั ะดะพะบัะผะตะฝัะฐัะธะธ

| ะคะฐะนะป | ะะฐะทะฝะฐัะตะฝะธะต |
|------|-----------|
| `TRAEFIK_DEPLOYMENT.md` | โ ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฝะฐ production |
| `LOCAL_TRAEFIK_TESTING.md` | โ ะะฝััััะบัะธะธ ะดะปั ะปะพะบะฐะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ั Traefik |
| `MIGRATION_GUIDE.md` | โ ะะพัะฐะณะพะฒะฐั ะผะธะณัะฐัะธั ัะพ ััะฐัะพะน ะบะพะฝัะธะณััะฐัะธะธ |
| `TRAEFIK_UPDATES.md` | โ ะญัะพั ัะฐะนะป |

### ะะพะฒัะต ัะบัะธะฟัั

| ะกะบัะธะฟั | ะะฐะทะฝะฐัะตะฝะธะต |
|--------|-----------|
| `deploy-traefik.sh` | โ ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ ัะตัะฒะตั ั ะฟัะพะฒะตัะบะฐะผะธ |

## ๐ฏ ะะปััะตะฒัะต ัะปัััะตะฝะธั

### ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฟัะฐะฒะปะตะฝะธะต SSL

```
ะกัะฐัะฐั ะบะพะฝัะธะณััะฐัะธั             ะะพะฒะฐั ะบะพะฝัะธะณััะฐัะธั (Traefik)
โโโโโโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Port 80: HTTP                   Port 80: HTTP โ HTTPS redirect
Port 443: Self-signed HTTPS     Port 443: Auto-renewing Let's Encrypt
Manual cert management          Automatic cert renewal
```

### ะะฐัััััะธะทะฐัะธั

```
ะกัะฐัะฐั ะบะพะฝัะธะณััะฐัะธั             ะะพะฒะฐั ะบะพะฝัะธะณััะฐัะธั (Traefik)
โโโโโโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
localhost:80 (frontend)         procurement.fros-ty.com/ (frontend)
localhost:3002 (backend)        procurement.fros-ty.com/api (backend)
Manual port mapping             Intelligent routing & load balancing
```

### ะะดะพัะพะฒัะต ะฟัะธะปะพะถะตะฝะธั

```
ะกัะฐัะฐั ะบะพะฝัะธะณััะฐัะธั             ะะพะฒะฐั ะบะพะฝัะธะณััะฐัะธั (Traefik)
โโโโโโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
No health checks                Docker HEALTHCHECK ะฒัััะพะตะฝะฐ
Manual monitoring              Traefik ะผะพะฝะธัะพัะธั ะทะดะพัะพะฒัะต
```

## ๐ ะงัะพ ะฝัะถะฝะพ ัะดะตะปะฐัั ะฝะฐ ัะตัะฒะตัะต

### 1๏ธโฃ ะัะพััะพะน ัะฟะพัะพะฑ (ั ัะบัะธะฟัะพะผ)

```bash
cd /opt/docker/compose/procurement
chmod +x deploy-traefik.sh
./deploy-traefik.sh
```

**ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ:**
- โ ะัะพะฒะตััะตั Docker/Docker Compose
- โ ะกะพะทะดะฐะตั ัะตัั `proxy` ะตัะปะธ ะฝะต ัััะตััะฒัะตั
- โ ะะพะฟะธััะตั .env ะตัะปะธ ะฝะต ัััะตััะฒัะตั
- โ ะกััะพะธั ะพะฑัะฐะทั
- โ ะะฐะฟััะบะฐะตั ะบะพะฝัะตะนะฝะตัั
- โ ะัะพะฒะตััะตั ะทะดะพัะพะฒัะต ัะตัะฒะธัะพะฒ

### 2๏ธโฃ ะััะฝะพะน ัะฟะพัะพะฑ

ะกะปะตะดัะนัะต ะฟะพัะฐะณะพะฒัะผ ะธะฝััััะบัะธัะผ ะฒ [TRAEFIK_DEPLOYMENT.md](./TRAEFIK_DEPLOYMENT.md).

## ๐งช ะะพะบะฐะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะฟะตัะตะด production

**ะะฐะถะฝะพ:** ะขะตััะธััะนัะต ะปะพะบะฐะปัะฝะพ ะฟะตัะตะด ัะฐะทะฒะตัััะฒะฐะฝะธะตะผ!

```bash
# ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะฒ LOCAL_TRAEFIK_TESTING.md
# ะญัะพ ะฟัะพะฒะตัะธั ะฒัั ะบะพะฝัะธะณััะฐัะธั ะฟะตัะตะด production
```

## ๐ ะััะธัะตะบัััะฐ Traefik

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         INTERNET                            โ
โ    procurement.fros-ty.com                  โ
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
         โโโโโโโโโผโโโโโโโโ
         โ    Traefik    โ
         โ  (Docker)     โ
         โ  Port 80/443  โ
         โโโโโโโโโฌโโโโโโโโ
                 โ
    โโโโโโโโโโโโโโผโโโโโโโโโโโโโ
    โ            โ            โ
    โ         (Label          โ
    โ        based            โ
    โ      routing)           โ
    โ            โ            โ
    โผ            โผ            โผ
โโโโโโโโโโโ โโโโโโโโโโโ โโโโโโโโโโโโ
โFrontend โ โ Backend โ โ Database โ
โ (nginx) โ โ(Express)โ โ(Postgres)โ
โPort 80  โ โ Port    โ โ Port     โ
โ         โ โ 3002    โ โ 5432     โ
โโโโโโโโโโโ โโโโโโโโโโโ โโโโโโโโโโโโ
     โฒ            โฒ           โฒ
     โโโโโโโโโโโโโโดโโโโโโโโโโโโ
     Procurement-internal network
```

## ๐ Security ัะปัััะตะฝะธั

| ะัะฟะตะบั | ะะพ | ะะพัะปะต (Traefik) |
|--------|----|----|
| HTTPS | Self-signed (ััะตะฑัะตั ะธะณะฝะพัะฐ) | Let's Encrypt (ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒะฐะปะธะดะฝัะน) |
| Cert renewal | ะััะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต | ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ะทะฐ 30 ะดะฝะตะน ะดะพ ะธััะตัะตะฝะธั |
| Port exposure | ะััะผะพะน ะดะพัััะฟ ะบ ะฟะพััะฐะผ | ะขะพะปัะบะพ ัะตัะตะท Traefik |
| Certificate chain | ะะตะฟะพะปะฝะฐั | ะะพะปะฝะฐั, ะฒะฐะปะธะดะฝะฐั |

## ๐ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะะพะฒัะต ะฒะฐะถะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะดะปั `.env`:

```env
# ะัะฝะพะฒะฝะพะต
DOMAIN=procurement.fros-ty.com
NODE_ENV=production

# ะะ
POSTGRES_DB=procurement_db
POSTGRES_USER=procurement_user
DB_PASSWORD=your_secure_password

# SSL
SSL_EMAIL=admin@fros-ty.com

# ะกะธััะตะผะฐ
GENERIC_TIMEZONE=UTC
```

## ๐ URLs ะฟะพัะปะต ัะฐะทะฒะตัััะฒะฐะฝะธั

| ะกะตัะฒะธั | URL |
|--------|-----|
| Frontend | `https://procurement.fros-ty.com/` |
| API Health | `https://procurement.fros-ty.com/api/health` |
| Backend Health | `https://procurement.fros-ty.com/health` |
| Traefik Dashboard | `http://your-server:8080/dashboard/` |

## โ๏ธ ะะฐะถะฝัะต ะทะฐะผะตัะฐะฝะธั

### 1. ะกะตัะตะฒะฐั ัะพะฟะพะปะพะณะธั

**ะกัะฐัะพะต:** ะะพะฝัะตะนะฝะตัั ะฝะฐ ะพะดะฝะพะน ัะตัะธ ั ะฟััะผัะผ ะฟะพััะฐะถะตะผ
**ะะพะฒะพะต:** ะัะดะตะปัะฝัะต ัะตัะธ ะดะปั ะฑะตะทะพะฟะฐัะฝะพััะธ

```
Frontend โ Traefik (proxy) โ Backend โ Database
```

### 2. Health checks

ะะฑะฐ ะบะพะฝัะตะนะฝะตัะฐ ัะตะฟะตัั ะธะผะตัั ะฒัััะพะตะฝะฝัะต health checks:

```bash
# Backend health check
docker-compose exec backend curl -f http://localhost:3002/health

# Frontend health check  
docker-compose exec frontend curl -f http://localhost/health
```

### 3. Traefik labels

ะะฐัััััะธะทะฐัะธั ะบะพะฝััะพะปะธััะตััั ัะตัะตะท Docker labels ะฒ `docker-compose.yml`:

```yaml
labels:
  - "traefik.enable=true"
  - "traefik.http.routers.xyz.rule=Host(...) && PathPrefix(...)"
```

### 4. ะกะตััะธัะธะบะฐั Let's Encrypt

ะะตัะฒัะน ะทะฐะฟัะพั ะผะพะถะตั ะทะฐะฝััั 30-60 ัะตะบัะฝะด ะดะปั ะฒัะดะฐัะธ ัะตััะธัะธะบะฐัะฐ.

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- [TRAEFIK_DEPLOYMENT.md](./TRAEFIK_DEPLOYMENT.md) - ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ production
- [LOCAL_TRAEFIK_TESTING.md](./LOCAL_TRAEFIK_TESTING.md) - ะะพะบะฐะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต
- [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md) - ะะธะณัะฐัะธั ัะพ ััะฐัะพะน ะบะพะฝัะธะณััะฐัะธะธ
- [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) - ะัะธะณะธะฝะฐะปัะฝัะน ะณะฐะนะด (ะดะปั ัะฟัะฐะฒะบะธ)

## ๐ ะัะธะผะตั: ะะพะปะฝัะน ะฟัะพัะตัั ัะฐะทะฒะตัััะฒะฐะฝะธั

### ะะฐ ะปะพะบะฐะปัะฝะพะน ะผะฐัะธะฝะต:

```bash
# 1. ะฃะฑะตะดะธัััั ะฒ ะธะทะผะตะฝะตะฝะธัั
git status

# 2. ะขะตััะธัะพะฒะฐัั ะปะพะบะฐะปัะฝะพ
# ะกะปะตะดะพะฒะฐัั LOCAL_TRAEFIK_TESTING.md

# 3. ะะฐะบะพะผะผะธัะธัั
git add -A
git commit -m "feat: Add Traefik support"
git push origin main
```

### ะะฐ ัะตัะฒะตัะต:

```bash
# 1. ะะปะพะฝะธัะพะฒะฐัั
cd /opt/docker/compose
git clone https://github.com/your-repo/procurement.git
cd procurement

# 2. ะะฐะทะฒะตัะฝััั
./deploy-traefik.sh

# 3. ะัะพะฒะตัะธัั
curl https://procurement.fros-ty.com/
```

## โ ะงะตะบะปะธัั ัะฐะทะฒะตัััะฒะฐะฝะธั

- [ ] ะขะตััะธัะพะฒะฐะฝะธะต ะปะพะบะฐะปัะฝะพ (LOCAL_TRAEFIK_TESTING.md)
- [ ] ะกะตัั `proxy` ัััะตััะฒัะตั ะฝะฐ ัะตัะฒะตัะต
- [ ] `.env` ัะฐะนะป ะฟะพะดะณะพัะพะฒะปะตะฝ ั ะฟัะฐะฒะธะปัะฝัะผะธ ะทะฝะฐัะตะฝะธัะผะธ
- [ ] DNS ะทะฐะฟะธัะธ ัะบะฐะทัะฒะฐัั ะฝะฐ ัะตัะฒะตั
- [ ] Traefik ัะฐะฑะพัะฐะตั ะธ ะฒะธะดะธั ะฝะพะฒัะต ะบะพะฝัะตะนะฝะตัั
- [ ] Frontend ะดะพัััะฟะตะฝ ั ะฒะฐะปะธะดะฝัะผ SSL
- [ ] API endpoints ัะฐะฑะพัะฐัั
- [ ] ะะฐะทะฐ ะดะฐะฝะฝัั ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝะฐ
- [ ] ะัะต health checks pass
- [ ] SSL ัะตััะธัะธะบะฐั ะพั Let's Encrypt
- [ ] ะะตะทะตัะฒะฝัะต ะบะพะฟะธะธ ัะพะทะดะฐะฝั

## ๐ ะะพะดะดะตัะถะบะฐ ะธ ะพัะปะฐะดะบะฐ

**ะะตัะตะด ะพะฑัะฐัะตะฝะธะตะผ ะทะฐ ะฟะพะผะพััั:**

1. ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose logs`
2. ะฃะฑะตะดะธัะตัั ะฒ ัะตัะตะฒะพะน ะบะพะฝัะธะณััะฐัะธะธ: `docker network inspect proxy`
3. ะขะตััะธััะนัะต endpoints: `curl https://procurement.fros-ty.com/api/health`
4. ะัะพะฒะตัััะต Traefik dashboard: `http://server:8080/dashboard/`

**ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั:**

```bash
# ะกัะฐััั
docker-compose ps
docker-compose logs

# ะะธะฐะณะฝะพััะธะบะฐ
docker network inspect proxy
docker inspect procurement-backend

# ะะตัะตะทะฐะณััะทะบะฐ
docker-compose restart
docker-compose restart backend

# ะะพะปะฝะฐั ะฟะตัะตัะฑะพัะบะฐ
docker-compose down -v
docker-compose build --no-cache
docker-compose up -d
```

## ๐ ะััะพัะธั ะธะทะผะตะฝะตะฝะธะน

| ะะฐัะฐ | ะะตััะธั | ะะทะผะตะฝะตะฝะธั |
|------|--------|----------|
| 2026-01-24 | 1.0.0 | ะะตัะฒะฐั ะฒะตััะธั ั ะฟะพะดะดะตัะถะบะพะน Traefik |

---

**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฝะฐ production

ะัะต ัะฐะนะปั ะฟะพะดะณะพัะพะฒะปะตะฝั ะธ ะฟัะพัะตััะธัะพะฒะฐะฝั. ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะฒ **TRAEFIK_DEPLOYMENT.md** ะดะปั ัะฐะทะฒะตัััะฒะฐะฝะธั ะฝะฐ ัะตัะฒะตั.
